using UnityEngine;

public class CameraFollow : MonoBehaviour
{
    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------

    [SerializeField]private Transform player;

    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------

    private bool isShopOpned;

    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------
    // Update is called once per frame
    private void OnEnable()
    {
        GameManager.OnGameStateChanged += LookAtPlayer;
        GameManager.OnGameStateChanged += ExitShop;
    }

    private void ExitShop(GameManager.GameState state)
    {
        if (state == GameManager.GameState.start)
        {
            transform.position = new Vector3(0f, 0f, -10);
            isShopOpned = false;
        }
    }

    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------

    private void LookAtPlayer(GameManager.GameState state)
    {
        if (state == GameManager.GameState.shopopned)
        {
            transform.position = new Vector3(-3.5f, 0, -10);
            isShopOpned = true;
        }
    }

    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------

    private void OnDisable()
    {
        GameManager.OnGameStateChanged -= LookAtPlayer;
        GameManager.OnGameStateChanged -= ExitShop;
    }

    void Update()
    {
        if (!isShopOpned)
        {

        transform.position = new Vector3(player.transform.position.x, transform.position.y,transform.position.z);
        }
    }

    //------------------------------------------------------------------------------------------------------------------------------
    //------------------------------------------------------------------------------------------------------------------------------
}
